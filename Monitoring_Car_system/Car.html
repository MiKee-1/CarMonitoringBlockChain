<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Simulatore Macchina - Due Veicoli</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f4f4f4; }
    h2 { color: #333; }
    .car-container { margin-bottom: 40px; }
    .status-box { background: #fff; padding: 15px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    button { margin: 3px; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; }
    .danger { background: #e74c3c; color: white; }
    .normal { background: #2ecc71; color: white; }
    .warn { background: #f39c12; color: white; }
    .reset { background: #3498db; color: white; }
  </style>
</head>
<body>
  <h2>Simulatore Stato Macchina</h2>

  <div class="car-container" id="car1-container">
    <h3>Macchina 1</h3>
    <div class="status-box" id="car1-status"></div>
    <div id="car1-buttons"></div>
  </div>

  <div class="car-container" id="car2-container">
    <h3>Macchina 2</h3>
    <div class="status-box" id="car2-status"></div>
    <div id="car2-buttons"></div>
  </div>

  <script>
    class Car {
      constructor(id) {
        this.id = id;
        this.pressure = 2.2;
        this.temperature = 90;
        this.engineOn = true;
        this.batteryStatus = "Normale";
        this.oilLevel = 80;
        this.brakesWear = 20;
        this.fuelLevel = 75;
        this.mileage = 45000;
        this.fault = "Nessuno";
        this.renderButtons();
        this.updateDisplay();
      }

      updateDisplay() {
        const display = `
          <p><strong>Pressione Gomme:</strong> ${this.pressure.toFixed(1)} bar</p>
          <p><strong>Temperatura Motore:</strong> ${this.temperature} Â°C</p>
          <p><strong>Stato Motore:</strong> ${this.engineOn ? "Acceso" : "Guasto"}</p>
          <p><strong>Stato Batteria:</strong> ${this.batteryStatus}</p>
          <p><strong>Livello Olio:</strong> ${this.oilLevel}%</p>
          <p><strong>Usura Freni:</strong> ${this.brakesWear}%</p>
          <p><strong>Livello Carburante:</strong> ${this.fuelLevel}%</p>
          <p><strong>Chilometraggio:</strong> ${this.mileage} km</p>
          <p><strong>Guasti:</strong> ${this.fault}</p>
        `;
        document.getElementById(this.id + "-status").innerHTML = display;
      }

      adjustPressure(change) {
        this.pressure = Math.max(0, this.pressure + change);
        this.updateDisplay();
      }

      simulateFault() {
        this.engineOn = false;
        this.fault = "Guasto motore rilevato!";
        this.updateDisplay();
      }

      increaseTemp() {
        this.temperature += Math.floor(Math.random() * 10 + 5);
        if (this.temperature > 130) this.fault = "Surriscaldamento!";
        this.updateDisplay();
      }

      burnBattery() {
        this.batteryStatus = "Batteria bruciata!";
        this.fault = "Corto circuito!";
        this.updateDisplay();
      }

      shutdownBattery() {
        this.batteryStatus = "Batteria spenta";
        this.updateDisplay();
      }

      adjustOil(change) {
        this.oilLevel = Math.min(100, Math.max(0, this.oilLevel + change));
        if (this.oilLevel < 20) this.fault = "Livello olio basso!";
        this.updateDisplay();
      }

      wearBrakes(amount) {
        this.brakesWear = Math.min(100, this.brakesWear + amount);
        if (this.brakesWear > 80) this.fault = "Freni usurati!";
        this.updateDisplay();
      }

      replaceBrakes() {
        this.brakesWear = 0;
        this.updateDisplay();
      }

      refuel(amount) {
        this.fuelLevel = Math.min(100, this.fuelLevel + amount);
        this.updateDisplay();
      }

      consumeFuel(amount) {
        this.fuelLevel = Math.max(0, this.fuelLevel - amount);
        this.fault = this.fuelLevel < 10 ? "Carburante quasi esaurito!" : "Nessuno";
        this.updateDisplay();
      }

      addMileage(km) {
        this.mileage += km;
        this.updateDisplay();
      }

      reset() {
        this.pressure = 2.2;
        this.temperature = 90;
        this.engineOn = true;
        this.batteryStatus = "Normale";
        this.oilLevel = 80;
        this.brakesWear = 20;
        this.fuelLevel = 75;
        this.mileage = 45000;
        this.fault = "Nessuno";
        this.updateDisplay();
      }

      renderButtons() {
        const actions = [
          { text: "Aumenta Pressione", class: "normal", action: () => this.adjustPressure(0.1) },
          { text: "Diminuisci Pressione", class: "warn", action: () => this.adjustPressure(-0.1) },
          { text: "Guasto Motore", class: "danger", action: () => this.simulateFault() },
          { text: "Aumenta Temperatura", class: "warn", action: () => this.increaseTemp() },
          { text: "Brucia Batteria", class: "danger", action: () => this.burnBattery() },
          { text: "Spegni Batteria", class: "warn", action: () => this.shutdownBattery() },
          { text: "Aggiungi Olio", class: "normal", action: () => this.adjustOil(5) },
          { text: "Consuma Olio", class: "warn", action: () => this.adjustOil(-10) },
          { text: "Usura Freni", class: "warn", action: () => this.wearBrakes(10) },
          { text: "Sostituisci Freni", class: "normal", action: () => this.replaceBrakes() },
          { text: "Rifornimento", class: "normal", action: () => this.refuel(25) },
          { text: "Consuma Carburante", class: "warn", action: () => this.consumeFuel(5) },
          { text: "Aggiungi 100 km", class: "normal", action: () => this.addMileage(100) },
          { text: "Aggiungi 1000 km", class: "warn", action: () => this.addMileage(1000) },
          { text: "Reset", class: "reset", action: () => this.reset() }
        ];

        const container = document.getElementById(this.id + "-buttons");
        actions.forEach(act => {
          const btn = document.createElement("button");
          btn.innerText = act.text;
          btn.className = act.class;
          btn.onclick = act.action;
          container.appendChild(btn);
        });
      }
    }

    // Istanzia due macchine
    const car1 = new Car("car1");
    const car2 = new Car("car2");
  </script>
</body>
</html>
